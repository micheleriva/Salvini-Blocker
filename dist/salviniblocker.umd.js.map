{"version":3,"file":"salviniblocker.umd.js","sources":["../main.js"],"sourcesContent":["function getSavedAnimal() {\n  return new Promise(resolve => {\n    return chrome.storage.sync.get(\"salvini_blocker_animal\", data => {\n      return data.salvini_blocker_animal\n        ? resolve(data.salvini_blocker_animal)\n        : resolve(\"sardine\");\n    });\n  });\n}\n\nasync function disableSalveenee() {\n  const animal = await getSavedAnimal();\n\n  const regexp = new RegExp(\"salvini\", \"gi\");\n\n  const imgTag = document.querySelectorAll(\"img\");\n  const sourceTag = document.querySelectorAll(\"source\");\n  const filteredImages = [];\n\n  for (let image of imgTag) {\n    if (\n      image.outerHTML.match(regexp) ||\n      image.baseURI.match(regexp) ||\n      image.src.match(regexp) ||\n      image.alt.match(regexp)\n    ) {\n      filteredImages.push(image);\n    }\n  }\n\n  for (let image of sourceTag) {\n    if (image.outerHTML.match(regexp)) {\n      filteredImages.push(image);\n    }\n  }\n\n  for (let node of filteredImages) {\n    const newImage = node =>\n      animal === \"sardine\"\n        ? `https://us-central1-sardine-as-a-service.cloudfunctions.net/api`\n        : `https://cataas.com/cat?width=${node.clientWidth ||\n            400}&height=${node.clientHeight || 250}`;\n\n    if (node.src) {\n      node.src = newImage(node);\n    }\n\n    if (node.srcset) {\n      node.srcset = newImage(node);\n    }\n  }\n}\n\ndocument.addEventListener(\"load\", disableSalveenee);\ndocument.addEventListener(\"DOMNodeInserted\", disableSalveenee);\n"],"names":["disableSalveenee","Promise","resolve","chrome","storage","sync","get","data","salvini_blocker_animal","animal","regexp","RegExp","imgTag","document","querySelectorAll","sourceTag","filteredImages","let","image","outerHTML","match","baseURI","src","alt","push","node","newImage","clientWidth","clientHeight","srcset","addEventListener"],"mappings":"8IAUeA,wCATN,IAAIC,iBAAQC,UACVC,OAAOC,QAAQC,KAAKC,IAAI,kCAA0BC,UAEnDL,EADGK,EAAKC,uBACAD,EAAKC,uBACL,8BAMVC,WAEAC,EAAS,IAAIC,OAAO,UAAW,MAE/BC,EAASC,SAASC,iBAAiB,OACnCC,EAAYF,SAASC,iBAAiB,UACtCE,EAAiB,SAELJ,kBAAQ,CAArBK,IAAIC,QAELA,EAAMC,UAAUC,MAAMV,IACtBQ,EAAMG,QAAQD,MAAMV,IACpBQ,EAAMI,IAAIF,MAAMV,IAChBQ,EAAMK,IAAIH,MAAMV,KAEhBM,EAAeQ,KAAKN,OAInB,UAAaH,kBAAW,CAAxBE,IAAIC,OACHA,EAAMC,UAAUC,MAAMV,IACxBM,EAAeQ,KAAKN,OAInB,UAAYF,kBAAgB,CAA5BC,IAAIQ,OACDC,WAAWD,SACJ,YAAXhB,EACK,mGAC+BgB,EAAKE,aACnC,iBAAcF,EAAKG,cAAgB,MAEvCH,EAAKH,MACPG,EAAKH,IAAMI,EAASD,IAGlBA,EAAKI,SACPJ,EAAKI,OAASH,EAASD,2CAK7BZ,SAASiB,iBAAiB,OAAQ9B,GAClCa,SAASiB,iBAAiB,kBAAmB9B"}